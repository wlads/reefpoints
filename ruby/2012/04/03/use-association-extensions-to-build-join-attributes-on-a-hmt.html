<!DOCTYPE html><html><head><title>Use Association Extensions to Build Join Attributes on a HMT</title><link href="/stylesheets/all-8e1315c1.css" media="screen" rel="stylesheet" type="text/css" /><script src="/javascripts/all-d0af4672.js" type="text/javascript"></script><meta content='NO-CACHE' http-equiv='CACHE-CONTROL'><meta content='DockYard is a Ruby on Rails, PostgreSQL, and, Ember.js, web / mobile application development software consultancy based in Boston, MA.' namer='description'><meta content='ruby on rails, rails, ruby, ruby on rails training, ruby application development, ruby on rails application development, ember application development, ember.js application development, software application development, web, web application development, mobile, mobile application development, ios, ios application development, iphone, iphone application development, android, android application development, postgres, startups, enterprise, Boston, MA, Massachusetts, for hire' name='keywords'><meta content='web development, mobile development, startups, enterprise, ruby on rails, rails, ruby, ruby on rails training, Boston, for hire' name='keywords'><meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0' name='viewport'><meta content='DockYard.com - Russ lays down a use case for ActiveRecord association extensions' name='description'><meta content='codeofficer' name='twitter:creator'><meta content='summary' name='twitter:card'><meta content='@DockYard' name='twitter:site'><meta content='http://reefpoints.dockyard.com/ruby/2012/04/03/use-association-extensions-to-build-join-attributes-on-a-hmt.html' name='twitter:url'><meta content='Use Association Extensions to Build Join Attributes on a HMT' name='twitter:title'><meta content='Russ lays down a use case for ActiveRecord association extensions' name='twitter:description'><link href='http://dockyard.com/humans.txt' rel='author'><link href='/apple-touch-icon.png' rel='apple-touch-icon'><link href='/apple-touch-icon-precomposed.png' rel='apple-touch-icon-precomposed'><script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-24185112-2']);
    _gaq.push(['_trackPageview']);
  
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
<!--
                                                                    ..
                                                                 ,Z+O.
                                                              .OO.O.. 
                                                             OZ..O.   
                                                         ..OO..87.    
                                                        .O7O..O...    
                                                      .O...Z~O.       
                                                   .:Z~. ..Z..        
                                                  +O.O   .8..         
                                     ...       .OO.  O  O?.           
                             ..ZOOOOOOOOOZOOO.ZOZ.   .OO..            
                           .OOOOOOOOOOOOOOOOOO..Z.   $O.              
                         .ZOOOOOOOOOOOOOOOOOO.  .O..O.                
                        .ZOOOOOOOOOOOOOOOOOOOZ  .:O$.                 
                        OZOOOOOOOOOOO...OOOOOOOZ$ZO                   
                      ..OOOOOOOOOOOOO  .OOOOOOOOOOO..                 
                      .OOOOOOOOOOOOOOOOOOOOOOOOOOOOO.                 
                      .OOOOOOOOOOOOOOOOOOOOOOOOOOOOZ.                 
                      OOOOOOOOOOOOOOOOOOOOOOOOOOOOOO.                 
                     .OOOOOOOOOOOOOOOOOOOOOOOOOOOOOO.                 
                     :OOOOOOOOOOOOOOOOOOOOOOOOOOOOOO.                 
                     ZOOOOOOOOOOOOOOOOOOOOOOOOOOOOOZ.                 
                     OOOOOOOOOOOOOOOOOOOOOOOOOOOO7OO.                 
                     ZOOOOOOOOOOOOOOOOOOOOOOOOOOOOOZ.                 
                     OOOOOOZOOOOOOOO.ZOOOOOOOOOOO7OO.                 
                     ZOOOOO.OOOOOOOO.OOOOOOOOOO.  OO.                 
...     ..           OOOOO.OOOOOOOO.OOOOOOOOO.   .O:                  
.OOZ...OOO.        ..OOOOO.OOOOOOO.OOOOOOOOZ.    .Z..                 
.OOOOOOOOO         .ZOOOOO.OOOOO..OOOOOOOO~      .Z                   
 .OOOOOOO.         .OOOOOO.OZZ..OOOOOOOOO.      .?O                   
  .OOOOOI.        .OOOOOOO..,ZOOOOOOOOOO..      .O.                   
   .OOOOZ.      ..ZOOOOOOOOOOOOOOOOOOOO~        .O.                   
   .OOOOO= .....ZOOOOOOOOOOOOOOOOOOOOOO.      ..O.                    
   ..OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOZ       .,OO.                    
    .ZOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO.     ...OO..                    
     .OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO.   ...OO.                       
     ..ZOOOOOOOOOOOOOOOOOOOOOOOOOOOO.... OZO..                        
      ...OOOOOOOOOOOOOOOOOOOOOOOOOOZOOOZO...                          
          .....~OOOOOOOOOOOOOOOOO:........                            
                ................
--></head><body id='blog'><header id='mobile-header'><div class='wrap'><a class='header-logo' href='/'>DockYard</a><div class='menu-button'></div></div><ul class='flexnav' data-breakpoint='481' id='mobile-nav'><li class='mobile-nav-link-wrap'><a class='mobile-nav-link' href='http://dockyard.com'><span class='mobile-nav-icon fontello'>h</span><p class='main-nav-item'>Home</p></a></li><li class='mobile-nav-link-wrap'><a class='mobile-nav-link' href='http://dockyard.com/work'><span class='mobile-nav-icon fontello'>w</span><p class='main-nav-item'>Work</p></a></li><li class='mobile-nav-link-wrap'><a class='mobile-nav-link' href='http://dockyard.com/team'><span class='mobile-nav-icon fontello'>p</span><p class='main-nav-item'>Team</p></a></li><li class='mobile-nav-link-wrap'><a class='mobile-nav-link' href='http://dockyard.com/community'><span class='mobile-nav-icon fontello'>c</span><p class='main-nav-item'>Community</p></a></li><li class='mobile-nav-link-wrap'><a class='mobile-nav-link' href='/'><span class='mobile-nav-icon fontello'>b</span><p class='main-nav-item'>Blog</p></a></li><li class='mobile-nav-link-wrap'><a class='mobile-nav-link' href='http://dockyard.com/contact'><span class='mobile-nav-icon fontello'>m</span><p class='main-nav-item'>Contact</p></a></li></ul></header><header id='site-header'><div class='wrap'><h1><a class='header-logo' href='http://dockyard.com'>DockYard</a></h1><ul class='main-nav'><li class='nav-work'><a class='main-nav-item' href='http://dockyard.com/work'>Work</a></li><li class='nav-work'><a class='main-nav-item' href='http://dockyard.com/team'>Team</a></li><li class='nav-work'><a class='main-nav-item' href='http://dockyard.com/community'>Community</a></li><li class='nav-work'><a class='main-nav-item' href='/'>Blog</a></li><li class='nav-work'><a class='main-nav-item' href='http://dockyard.com/contact'>Contact</a></li></ul></div></header><section id='content'><section id='post'><aside class='post-metas-wrap'><ul class='post-metas'><li class='post-meta'><a class="post-author" href="/authors/russ-jones.html">Russ Jones</a></li><li class='post-meta'><span><a class='link link-in-post fontello' href='http://twitter.com/codeofficer' target='_blank'>t</a><a class='link link-in-post fontello' href='https://github.com/codeofficer' target='_blank'>g</a></span></li><li class='post-meta post-date'>03 Apr 2012</li></ul></aside><div class='post-div'><p class='post-meta post-tags'><a class="tag-link" href="/categories/ruby.html">Ruby (28)</a>, <a class="tag-link" href="/categories/ruby-on-rails.html">Ruby on Rails (21)</a></p><div class='post-title-wrap'><h1 class='post-title'>Use Association Extensions to Build Join Attributes on a HMT</h1></div><current_page class='post-content'><p>It&#39;s common in Rails to use a <code>has_many :through</code> relationship to model User/Group Memberships. 
Sometimes we have extra data in the join that we would like to make use of, but getting that 
data in there can be combersome depending on our approach. For example, given the
following diagram and schema:</p>

<p><img src="/images/russ/yuml-cb495048.png" alt="Diagram"></p>
<div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
</pre></td>
  <td class="code"><pre><span class="constant">ActiveRecord</span>::<span class="constant">Schema</span>.define(<span class="symbol">:version</span> =&gt; <span class="integer">20120324170519</span>) <span class="keyword">do</span>
  create_table <span class="string"><span class="delimiter">&quot;</span><span class="content">groups</span><span class="delimiter">&quot;</span></span>, <span class="symbol">:force</span> =&gt; <span class="predefined-constant">true</span> <span class="keyword">do</span> |t|
    t.string   <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>
    t.datetime <span class="string"><span class="delimiter">&quot;</span><span class="content">created_at</span><span class="delimiter">&quot;</span></span>, <span class="symbol">:null</span> =&gt; <span class="predefined-constant">false</span>
    t.datetime <span class="string"><span class="delimiter">&quot;</span><span class="content">updated_at</span><span class="delimiter">&quot;</span></span>, <span class="symbol">:null</span> =&gt; <span class="predefined-constant">false</span>
  <span class="keyword">end</span>

  create_table <span class="string"><span class="delimiter">&quot;</span><span class="content">memberships</span><span class="delimiter">&quot;</span></span>, <span class="symbol">:force</span> =&gt; <span class="predefined-constant">true</span> <span class="keyword">do</span> |t|
    t.integer  <span class="string"><span class="delimiter">&quot;</span><span class="content">user_id</span><span class="delimiter">&quot;</span></span>
    t.integer  <span class="string"><span class="delimiter">&quot;</span><span class="content">group_id</span><span class="delimiter">&quot;</span></span>
    t.string   <span class="string"><span class="delimiter">&quot;</span><span class="content">role</span><span class="delimiter">&quot;</span></span>
    t.datetime <span class="string"><span class="delimiter">&quot;</span><span class="content">created_at</span><span class="delimiter">&quot;</span></span>, <span class="symbol">:null</span> =&gt; <span class="predefined-constant">false</span>
    t.datetime <span class="string"><span class="delimiter">&quot;</span><span class="content">updated_at</span><span class="delimiter">&quot;</span></span>, <span class="symbol">:null</span> =&gt; <span class="predefined-constant">false</span>
  <span class="keyword">end</span>

  create_table <span class="string"><span class="delimiter">&quot;</span><span class="content">users</span><span class="delimiter">&quot;</span></span>, <span class="symbol">:force</span> =&gt; <span class="predefined-constant">true</span> <span class="keyword">do</span> |t|
    t.string   <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>
    t.datetime <span class="string"><span class="delimiter">&quot;</span><span class="content">created_at</span><span class="delimiter">&quot;</span></span>, <span class="symbol">:null</span> =&gt; <span class="predefined-constant">false</span>
    t.datetime <span class="string"><span class="delimiter">&quot;</span><span class="content">updated_at</span><span class="delimiter">&quot;</span></span>, <span class="symbol">:null</span> =&gt; <span class="predefined-constant">false</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
</pre></td>
</tr></table>
</div></div>
<p>We might deal directly with the join table to assign our additonal data.</p>
<div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre><span class="instance-variable">@user</span> = <span class="constant">User</span>.create(<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">User 1</span><span class="delimiter">'</span></span>)
<span class="instance-variable">@user</span> = <span class="constant">Group</span>.create(<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Group 1</span><span class="delimiter">'</span></span>)
<span class="instance-variable">@membership</span> = <span class="constant">Membership</span>.create <span class="keyword">do</span> |m|
  m.user = <span class="instance-variable">@user</span>
  m.group = <span class="instance-variable">@group</span>
  m.role = <span class="string"><span class="delimiter">'</span><span class="content">admin</span><span class="delimiter">'</span></span>
<span class="keyword">end</span>
<span class="instance-variable">@user</span>.admin? <span class="comment"># =&gt; true</span>
<span class="instance-variable">@user</span>.editor? <span class="comment"># =&gt; false</span>
</pre></td>
</tr></table>
</div></div>
<p>There&#39;s a better way to pull this off ...</p>
<div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre><span class="instance-variable">@group</span>.admins &lt;&lt; <span class="instance-variable">@user</span>
<span class="instance-variable">@user</span>.admin? <span class="comment"># =&gt; true</span>
<span class="instance-variable">@user</span>.editor? <span class="comment"># =&gt; false</span>
</pre></td>
</tr></table>
</div></div>
<p>And this is how it&#39;s done ...</p>
<div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
</pre></td>
  <td class="code"><pre><span class="keyword">class</span> <span class="class">User</span> &lt; <span class="constant">ActiveRecord</span>::<span class="constant">Base</span>
  has_many <span class="symbol">:memberships</span>
  has_many <span class="symbol">:groups</span>, <span class="symbol">:through</span> =&gt; <span class="symbol">:memberships</span>

  <span class="keyword">def</span> <span class="function">admin?</span>
    memberships.where(<span class="symbol">:role</span> =&gt; <span class="string"><span class="delimiter">'</span><span class="content">admin</span><span class="delimiter">'</span></span>).first
  <span class="keyword">end</span>

  <span class="keyword">def</span> <span class="function">editor?</span>
    memberships.where(<span class="symbol">:role</span> =&gt; <span class="string"><span class="delimiter">'</span><span class="content">editor</span><span class="delimiter">'</span></span>).first
  <span class="keyword">end</span>
<span class="keyword">end</span>
</pre></td>
</tr></table>
</div></div><div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre><span class="keyword">class</span> <span class="class">Membership</span> &lt; <span class="constant">ActiveRecord</span>::<span class="constant">Base</span>
  belongs_to <span class="symbol">:group</span>
  belongs_to <span class="symbol">:user</span>
<span class="keyword">end</span>
</pre></td>
</tr></table>
</div></div><div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
</pre></td>
  <td class="code"><pre><span class="keyword">class</span> <span class="class">Group</span> &lt; <span class="constant">ActiveRecord</span>::<span class="constant">Base</span>
  has_many <span class="symbol">:memberships</span>
  has_many <span class="symbol">:users</span>, <span class="symbol">:through</span> =&gt; <span class="symbol">:memberships</span>

  has_many <span class="symbol">:admins</span>, <span class="symbol">:through</span> =&gt; <span class="symbol">:memberships</span>, <span class="symbol">:source</span> =&gt; <span class="symbol">:user</span>,
    <span class="symbol">:conditions</span> =&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">memberships.role = 'admin'</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
      <span class="keyword">def</span> <span class="function">&lt;&lt;</span>(admin)
        proxy_association.owner.memberships.create(<span class="symbol">:role</span> =&gt; <span class="string"><span class="delimiter">'</span><span class="content">admin</span><span class="delimiter">'</span></span>, <span class="symbol">:user</span> =&gt; admin)
      <span class="keyword">end</span>
  <span class="keyword">end</span>

  has_many <span class="symbol">:editors</span>, <span class="symbol">:through</span> =&gt; <span class="symbol">:memberships</span>, <span class="symbol">:source</span> =&gt; <span class="symbol">:user</span>,
    <span class="symbol">:conditions</span> =&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">memberships.role = 'editor'</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
      <span class="keyword">def</span> <span class="function">&lt;&lt;</span>(editor)
        proxy_association.owner.memberships.create(<span class="symbol">:role</span> =&gt; <span class="string"><span class="delimiter">'</span><span class="content">editor</span><span class="delimiter">'</span></span>, <span class="symbol">:user</span> =&gt; editor)
      <span class="keyword">end</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
</pre></td>
</tr></table>
</div></div>
<p>We&#39;re defining an extension on our group&#39;s <code>has_many</code> association which overrides
the <code>&lt;&lt;</code> method on that collection. We then tell the proxy association&#39;s owner
(which is our group object) to create the user/group join record, but with an additional
role assignment of &#39;admin&#39;.</p>
<div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre><span class="instance-variable">@group</span>.admins &lt;&lt; <span class="instance-variable">@user</span>
<span class="instance-variable">@user</span>.admin? <span class="comment"># =&gt; true</span>
<span class="instance-variable">@user</span>.editor? <span class="comment"># =&gt; false</span>
</pre></td>
</tr></table>
</div></div>
<p>Pretty expressive, thanks to ActiveRecord!</p>
<div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
</pre></td>
  <td class="code"><pre>require <span class="string"><span class="delimiter">'</span><span class="content">test_helper</span><span class="delimiter">'</span></span>

<span class="keyword">class</span> <span class="class">GroupTest</span> &lt; <span class="constant">ActiveSupport</span>::<span class="constant">TestCase</span>
  setup <span class="keyword">do</span>
    <span class="instance-variable">@user_1</span> = <span class="constant">User</span>.create(<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">User 1</span><span class="delimiter">'</span></span>)
    <span class="instance-variable">@user_2</span> = <span class="constant">User</span>.create(<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">User 2</span><span class="delimiter">'</span></span>)
    <span class="instance-variable">@user_3</span> = <span class="constant">User</span>.create(<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">User 3</span><span class="delimiter">'</span></span>)
    <span class="instance-variable">@group</span> = <span class="constant">Group</span>.create(<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Group 1</span><span class="delimiter">'</span></span>)
  <span class="keyword">end</span>

  test <span class="string"><span class="delimiter">&quot;</span><span class="content">No Memberships</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
    assert_equal <span class="instance-variable">@user_1</span>.memberships.count, <span class="integer">0</span>
  <span class="keyword">end</span>

  test <span class="string"><span class="delimiter">&quot;</span><span class="content">@group.users &lt;&lt; @user_1 sets nil role on membership</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
    <span class="instance-variable">@group</span>.users &lt;&lt; <span class="instance-variable">@user_1</span>
    assert_equal <span class="instance-variable">@user_1</span>.memberships.count, <span class="integer">1</span>
    assert_equal <span class="instance-variable">@user_1</span>.memberships.first.role, <span class="predefined-constant">nil</span>
  <span class="keyword">end</span>

  test <span class="string"><span class="delimiter">&quot;</span><span class="content">@group.admins &lt;&lt; @user_2 sets 'admin' role on membership</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
    <span class="instance-variable">@group</span>.admins &lt;&lt; <span class="instance-variable">@user_2</span>
    assert_equal <span class="instance-variable">@user_2</span>.memberships.count, <span class="integer">1</span>
    assert_equal <span class="instance-variable">@user_2</span>.memberships.first.role, <span class="string"><span class="delimiter">'</span><span class="content">admin</span><span class="delimiter">'</span></span>
  <span class="keyword">end</span>

  test <span class="string"><span class="delimiter">&quot;</span><span class="content">@group.editors &lt;&lt; @user_3 sets 'editor' role on membership</span><span class="delimiter">&quot;</span></span> <span class="keyword">do</span>
    <span class="instance-variable">@group</span>.editors &lt;&lt; <span class="instance-variable">@user_3</span>
    assert_equal <span class="instance-variable">@user_3</span>.memberships.count, <span class="integer">1</span>
    assert_equal <span class="instance-variable">@user_3</span>.memberships.first.role, <span class="string"><span class="delimiter">'</span><span class="content">editor</span><span class="delimiter">'</span></span>
  <span class="keyword">end</span>

  teardown <span class="keyword">do</span>
    <span class="constant">User</span>.delete_all
    <span class="constant">Group</span>.delete_all
    <span class="constant">Membership</span>.delete_all
  <span class="keyword">end</span>
<span class="keyword">end</span>
</pre></td>
</tr></table>
</div></div></current_page><p class='issue'>See a problem with the current page? &nbsp;<a href='https://github.com/dockyard/reefpoints/blob/master/source/posts/' target='_blank'>Send a pull request to contribute, we'll happily accept!</a></p><section class='post-share'><h1>Like the current page? Please share!</h1><div class='social-button'><a class='twitter-share-button' data-url='http://reefpoints.dockyard.com/ruby/2012/04/03/use-association-extensions-to-build-join-attributes-on-a-hmt.html' data-via='DockYard' href='https://twitter.com/share'>Tweet</a></div><script>
  !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='//platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','twitter-wjs');
</script><div class='social-button'><div class='g-plusone' data-href='#' data-size='medium' data-width='100'></div><script>
  (function() {var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;po.src = 'https://apis.google.com/js/plusone.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);})();
</script></div></section><section id='post-comments'><div id='disqus_thread'></div><script>
  var disqus_shortname = 'reefpoints';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script><noscript>Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a></noscript></noscript></section></div></section><script>
  var path = window.location.pathname.split('/').reverse();
  var postname = path[0].split('.');
  var change = postname[0] + '.md';
  var newpath = 'https://github.com/dockyard/reefpoints/blob/master/source/posts/' + path[3] + '-' + path[2] + '-' + path[1] + '-' + change
  $('.issue a').attr('href', newpath);
</script>
</section><footer><ul class='footer-links'><li><a class='link link-in-footer fontello' href='https://github.com/DockYard' target='_blank'>g</a></li><li><a class='link link-in-footer fontello' href='https://twitter.com/DockYard' target='_blank'>t</a></li><li><a class='link link-in-footer fontello' href='http://reefpoints.dockyard.com/atom.xml' target='_blank'>r</a></li><li><a class='link link-in-footer fontello' href='http://dockyard.com/contact' target='_blank'>m</a></li></ul><form class='footer-form'><label class='footer-form-label'>Get in touch with us!</label><input class='footer-form-input' placeholder='Email' type='text'><button class='footer-form-submit fontello' href='http://dockyard.com/contact'>R</button></form><a class='footer-number' href='tel:855-362-5973'>(855) DOCK-YRD</a><p class='footer-copyright'>&copy; 2013 DockYard, LLC. All Rights Reserved.</p></footer><audio class='foghorn' preload='auto' src='/sound/foghorm.mp3'></audio><script>
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'reefpoints'; // required: replace example with your forum shortname
  
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script></body></html>
