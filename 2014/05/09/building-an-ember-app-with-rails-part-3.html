<!DOCTYPE html><html><head><title>Building an Ember App with Rails Part 3</title><link href="/stylesheets/all-5327c828.css" media="screen" rel="stylesheet" type="text/css" /><script src="/javascripts/all-ce68a29a.js" type="text/javascript"></script><meta content='NO-CACHE' http-equiv='CACHE-CONTROL'><meta content='DockYard is a Ruby on Rails, PostgreSQL, and, Ember.js, web / mobile application development software consultancy based in Boston, MA.' namer='description'><meta content='ruby on rails, rails, ruby, ruby on rails training, ruby application development, ruby on rails application development, ember application development, ember.js application development, software application development, web, web application development, mobile, mobile application development, ios, ios application development, iphone, iphone application development, android, android application development, postgres, startups, enterprise, Boston, MA, Massachusetts, for hire' name='keywords'><meta content='web development, mobile development, startups, enterprise, ruby on rails, rails, ruby, ruby on rails training, Boston, for hire' name='keywords'><meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0' name='viewport'><meta charset='utf-8'><meta content='DockYard.com - ' name='description'><meta content='bcardarella' name='twitter:creator'><meta content='summary' name='twitter:card'><meta content='@DockYard' name='twitter:site'><meta content='http://reefpoints.dockyard.com/2014/05/09/building-an-ember-app-with-rails-part-3.html' name='twitter:url'><meta content='Building an Ember App with Rails Part 3' name='twitter:title'><meta name='twitter:description'><link href='//cloud.typography.com/6496052/702882/css/fonts.css' rel='stylesheet' type='text/css'><link href='http://dockyard.com/humans.txt' rel='author'><link href='/favicon-573a5e34.png' rel='shortcut icon' type='image/x-icon'><link href='/favicon-573a5e34.png' rel='icon' type='image/x-icon'><link href='/apple-touch-icon.png' rel='apple-touch-icon'><link href='/apple-touch-icon-precomposed.png' rel='apple-touch-icon-precomposed'><script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-24185112-2']);
    _gaq.push(['_trackPageview']);
  
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
<!--
                                             ..
                                           .O.
                                       .:OO.
                                      :OOO.
                                    :OOO:.
                         ...      :OOOO:
                   ..ZOOOOOOOOO..OZ.O.
                   OOOOOOOOOOOOOOOOI
                  OOOOOOOOOOOOOOOOI,
                 OOOOOOOO. .OOOOOOOO:
                 OOOOOOOO   OOOOOOOOO:
                OOOOOOOOOOOOOOOOOOOOO.
                OOOOOOOOOOOOOOOOOOOOO:
               .OOOOOOOOOOOOOOOOOOOOO:
               .OOOOOOOOOOOOOOOOOOOOO.
                OOOOOOOOOOOOOOOOOOOOO
                OOOOOO?:   .OOOOOOOOO
               .OOOOO      OOOOOOOOOO
,OO ZO,        OOOOO,     OOOOOOOOOO+
 OOOOO.        OOOOO     OOOOOOOOOOO+
  OOO?        OOOOO     .OOOOOOOOOOO:
   OOO,      OOOOO.    .OOOOOOOOOOOO
    OOOOOOOOOOOOO.    .OOOOOOOOOOOO.
     OOOOOOOOOOOO.  .OOOOOOOOOOOOO.
      8OOOOOOOOOOOOOOOOOOOOOOOODO:
         :OOOOOOOOOOOOOOOOOOOO::

--></head><body class='x2014 x2014_05 x2014_05_09 x2014_05_09_building-an-ember-app-with-rails-part-3'><header><div class='extended-nav-wrap'><div class='l-wrap--wide'><nav class='extended-nav'><a class="extended-nav--logo" data-icon="⌂" href="http://dockyard.com/"><span class='is-hidden'>Home</span></a>
<a class="extended-nav--close" data-icon="X" href="#"><span class='is-hidden'>Close</span></a><div class='extended-nav__items'><div class='extended-nav__items--mobile'><a class="extended-nav__item--work extended-nav__item" href="#">Work</a><nav class='work-nav--mobile'><a href="http://dockyard.com/work/credit-card-reviews" class="work-nav-item"><strong class='work-nav-item__title'>Credit Card Reviews</strong></a>
<a href="http://dockyard.com/work/coachup" class="work-nav-item"><strong class='work-nav-item__title'>CoachUp</strong></a>
<a href="http://dockyard.com/work/askthem" class="work-nav-item"><strong class='work-nav-item__title'>AskThem</strong></a>
<a href="http://dockyard.com/work/beacon-hill-blitz" class="work-nav-item"><strong class='work-nav-item__title'>Beacon Hill Blitz</strong></a></nav></div><a class="extended-nav__item" href="http://dockyard.com/team">Our Team</a><a class="extended-nav__item" href="http://dockyard.com/process">Process</a><a class="extended-nav__item" href="http://dockyard.com/community">Community</a><a class="extended-nav__item active" href="/">Blog</a><a class="extended-nav__item" href="http://dockyard.com/hire-us">Hire Us</a></div></nav><nav class='work-nav'><h6>Selected Work</h6><a href="http://dockyard.com/work/credit-card-reviews" class="work-nav-item"><strong class='work-nav-item__title'>Credit Card Reviews</strong><p>Credit card advice from real people.</p></a>
<a href="http://dockyard.com/work/coachup" class="work-nav-item"><strong class='work-nav-item__title'>CoachUp</strong><p>You should be training. Right now.</p></a>
<a href="http://dockyard.com/work/askthem" class="work-nav-item"><strong class='work-nav-item__title'>AskThem</strong><p>Ask officials questions on city, state, and federal levels.</p></a>
<a href="http://dockyard.com/work/beacon-hill-blitz" class="work-nav-item"><strong class='work-nav-item__title'>Beacon Hill Blitz</strong><p>How technology helped repeal the #TechTax.</p></a></nav></div></div><nav class='main-nav-wrap'><div class='main-nav l-wrap--wide'><a class="logo" href="http://dockyard.com">DockYard</a><a class="club-sandwich" data-icon="☰" href="#"><span class='is-hidden'>Navigation</span></a></div></nav></header><div class='push--header'></div><div class='l-wrap--blog'><a href="/"><strong class='logo--blog'>ReefPoints</strong><strong class='logo--blog__tagline'>Blog</strong></a><nav class='blog-nav'><a class="blog-nav__item " href="/">Posts</a><a class="blog-nav__item " href="/categories.html">Categories</a><a class="blog-nav__item " href="/authors.html">Authors</a></nav></div><div class='l-wrap--blog__post'><h1 class='post__title'>Building an Ember App with Rails Part 3</h1><a class="post__author" href="/authors/brian-cardarella.html">Brian Cardarella</a><time class='post__date'>May 9<sup>th</sup>, 2014</time><div class='post__content'><p>Let&#39;s implement some navigation in the Boston Ember app.</p>

<p>Here is a list of sections in the Boston Ember website I&#39;d like to add:</p>

<ul>
<li>About</li>
<li>Speakers</li>
</ul>

<p>For this part we will work with faked out data. In a future part we will
provide the Rails backend.</p>

<p>Our first navigation test will be an easy one, create
<code>ember/tests/integration/about-page-test.js</code></p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> startApp from <span class="string"><span class="delimiter">'</span><span class="content">bostonember/tests/helpers/start-app</span><span class="delimiter">'</span></span>;

<span class="keyword">var</span> App;

module(<span class="string"><span class="delimiter">'</span><span class="content">Integration - About Page</span><span class="delimiter">'</span></span>, {
  <span class="function">setup</span>: <span class="keyword">function</span>() {
    App = startApp();
  },
  <span class="function">teardown</span>: <span class="keyword">function</span>() {
    Ember.run(App, <span class="string"><span class="delimiter">'</span><span class="content">destroy</span><span class="delimiter">'</span></span>);
  }
});

test(<span class="string"><span class="delimiter">'</span><span class="content">Should navigate to the About page</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>() {
  visit(<span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>).then(<span class="keyword">function</span>() {
    click(<span class="string"><span class="delimiter">&quot;</span><span class="content">a:contains('About')</span><span class="delimiter">&quot;</span></span>).then(<span class="keyword">function</span>() {
      equal(find(<span class="string"><span class="delimiter">'</span><span class="content">h3</span><span class="delimiter">'</span></span>).text(), <span class="string"><span class="delimiter">'</span><span class="content">About</span><span class="delimiter">'</span></span>);
    });
  });
});
</pre></td>
</tr></table>
</div></div>
<p>After writing this test we can confirm that our test is red in our browser. To make this green we need to add an <code>About</code> route, 
a link from the landing page to the <code>About</code> route, and a template for the
<code>About</code> route.</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre><span class="comment">// ember/app/router.js</span>
Router.map(<span class="keyword">function</span>() {
  <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">about</span><span class="delimiter">'</span></span>);
});
</pre></td>
</tr></table>
</div></div><div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre><span class="comment">// ember/app/templates/application.hbs</span>
<span class="tag">&lt;h2</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Welcome to Boston Ember<span class="tag">&lt;/h2&gt;</span>

{{link-to <span class="string"><span class="delimiter">'</span><span class="content">About</span><span class="delimiter">'</span></span> <span class="string"><span class="delimiter">'</span><span class="content">about</span><span class="delimiter">'</span></span>}}

{{outlet}}
</pre></td>
</tr></table>
</div></div><div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="comment">// ember/app/templates/about.hbs</span>
<span class="tag">&lt;h3&gt;</span>About<span class="tag">&lt;/h3&gt;</span>

<span class="tag">&lt;p&gt;</span>Boston Ember is the monthly meetup where awesome people get together
to do awesome Ember related things!<span class="tag">&lt;/p&gt;</span>
</pre></td>
</tr></table>
</div></div>
<p>Your test should now be green. If you navigate to the root path in your
browser you should be able to click through the app. What about getting
back to root? We can add a test to for this navigation as well.</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre><span class="comment">// ember/tests/integration/landing-page-test.js</span>
test(<span class="string"><span class="delimiter">'</span><span class="content">Should allow navigating back to root from another page</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>() {
  visit(<span class="string"><span class="delimiter">'</span><span class="content">/about</span><span class="delimiter">'</span></span>).then(<span class="keyword">function</span>() {
    click(<span class="string"><span class="delimiter">'</span><span class="content">a:contains(&quot;Home&quot;)</span><span class="delimiter">'</span></span>).then(<span class="keyword">function</span>() {
      notEqual(find(<span class="string"><span class="delimiter">'</span><span class="content">h3</span><span class="delimiter">'</span></span>).text(), <span class="string"><span class="delimiter">'</span><span class="content">About</span><span class="delimiter">'</span></span>);
    });
  });
});
</pre></td>
</tr></table>
</div></div><div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre><span class="comment">// ember/templates/application.hbs</span>
{{link-to <span class="string"><span class="delimiter">'</span><span class="content">Home</span><span class="delimiter">'</span></span> <span class="string"><span class="delimiter">'</span><span class="content">application</span><span class="delimiter">'</span></span>}}
{{link-to <span class="string"><span class="delimiter">'</span><span class="content">About</span><span class="delimiter">'</span></span> <span class="string"><span class="delimiter">'</span><span class="content">about</span><span class="delimiter">'</span></span>}}
</pre></td>
</tr></table>
</div></div>
<p>Great! A very simple navigation is setup and fully tested. How about something
more complex. Let&#39;s allow our visitors to see the people that have spoken at
Boston Ember. Before we do that we need to add new dependencies to our app for
mocking out remote requests.</p>

<p>We will be using
<a href="https://github.com/trek/pretender/tree/0.0.5">Pretender</a> by Ember Core
member Trek Glowacki. Pretender is a nice DSL for faking out remote
responses.</p>

<p>We can use the
<a href="https://github.com/rwjblue/ember-cli-pretender">ember-cli-pretender</a>
Ember CLI Addon to quickly set up Pretender:</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>npm install --save-dev ember-cli-pretender
</pre></td>
</tr></table>
</div></div>
<p>Tell <code>JSHint</code> to ignore the <code>Pretender</code> constant.  Open up
<code>ember/tests/.jshintrc</code> and add <code>&quot;Pretender&quot;</code> to the end of the <code>&quot;predef&quot;</code>
array.</p>

<p>Finally we need ember-data to make requests namespaced under <code>api</code> to
our server:</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre><span class="comment">// ember/app/adapters/application.js</span>
<span class="reserved">import</span> DS from <span class="string"><span class="delimiter">'</span><span class="content">ember-data</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> DS.ActiveModelAdapter.extend({
  <span class="key">namespace</span>: <span class="string"><span class="delimiter">'</span><span class="content">api</span><span class="delimiter">'</span></span>
});
</pre></td>
</tr></table>
</div></div>
<p>We should be in a good place to write our tests.</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
46
47
48
49
<strong>50</strong>
51
52
53
54
55
56
57
58
59
<strong>60</strong>
61
62
63
64
65
66
67
68
69
<strong>70</strong>
71
72
73
74
75
</pre></td>
  <td class="code"><pre><span class="comment">// ember/tests/integration/speakers-page-test.js</span>
<span class="reserved">import</span> startApp from <span class="string"><span class="delimiter">'</span><span class="content">bostonember/tests/helpers/start-app</span><span class="delimiter">'</span></span>;

<span class="keyword">var</span> App, server;

module(<span class="string"><span class="delimiter">'</span><span class="content">Integration - Speaker Page</span><span class="delimiter">'</span></span>, {
  <span class="function">setup</span>: <span class="keyword">function</span>() {
    App = startApp();
    <span class="keyword">var</span> speakers = [
      {
        <span class="key">id</span>: <span class="integer">1</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Bugs Bunny</span><span class="delimiter">'</span></span>
      },
      {
        <span class="key">id</span>: <span class="integer">2</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Wile E. Coyote</span><span class="delimiter">'</span></span>
      },
      {
        <span class="key">id</span>: <span class="integer">3</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Yosemite Sam</span><span class="delimiter">'</span></span>
      }
    ];

    server = <span class="keyword">new</span> Pretender(<span class="keyword">function</span>() {
      <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">/api/speakers</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(request) {
        <span class="keyword">return</span> [<span class="integer">200</span>, {<span class="key"><span class="delimiter">&quot;</span><span class="content">Content-Type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">application/json</span><span class="delimiter">&quot;</span></span>}, JSON.stringify({<span class="key">speakers</span>: speakers})];
      });

      <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">/api/speakers/:id</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(request) {
        <span class="keyword">var</span> speaker = speakers.find(<span class="keyword">function</span>(speaker) {
          <span class="keyword">if</span> (speaker.id === parseInt(request.params.id, <span class="integer">10</span>)) {
            <span class="keyword">return</span> speaker;
          }
        });

        <span class="keyword">return</span> [<span class="integer">200</span>, {<span class="key"><span class="delimiter">&quot;</span><span class="content">Content-Type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">application/json</span><span class="delimiter">&quot;</span></span>}, JSON.stringify({<span class="key">speaker</span>: speaker})];
      });
    });

  },
  <span class="function">teardown</span>: <span class="keyword">function</span>() {
    Ember.run(App, <span class="string"><span class="delimiter">'</span><span class="content">destroy</span><span class="delimiter">'</span></span>);
    server.shutdown();
  }
});

test(<span class="string"><span class="delimiter">'</span><span class="content">Should allow navigation to the speakers page from the landing page</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>() {
  visit(<span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>).then(<span class="keyword">function</span>() {
    click(<span class="string"><span class="delimiter">'</span><span class="content">a:contains(&quot;Speakers&quot;)</span><span class="delimiter">'</span></span>).then(<span class="keyword">function</span>() {
      equal(find(<span class="string"><span class="delimiter">'</span><span class="content">h3</span><span class="delimiter">'</span></span>).text(), <span class="string"><span class="delimiter">'</span><span class="content">Speakers</span><span class="delimiter">'</span></span>);
    });
  });
});

test(<span class="string"><span class="delimiter">'</span><span class="content">Should list all speakers</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>() {
  visit(<span class="string"><span class="delimiter">'</span><span class="content">/speakers</span><span class="delimiter">'</span></span>).then(<span class="keyword">function</span>() {
    equal(find(<span class="string"><span class="delimiter">'</span><span class="content">a:contains(&quot;Bugs Bunny&quot;)</span><span class="delimiter">'</span></span>).length, <span class="integer">1</span>);
    equal(find(<span class="string"><span class="delimiter">'</span><span class="content">a:contains(&quot;Wile E. Coyote&quot;)</span><span class="delimiter">'</span></span>).length, <span class="integer">1</span>);
    equal(find(<span class="string"><span class="delimiter">'</span><span class="content">a:contains(&quot;Yosemite Sam&quot;)</span><span class="delimiter">'</span></span>).length, <span class="integer">1</span>);
  });
});

test(<span class="string"><span class="delimiter">'</span><span class="content">Should be able to navigate to a speaker page</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>() {
  visit(<span class="string"><span class="delimiter">'</span><span class="content">/speakers</span><span class="delimiter">'</span></span>).then(<span class="keyword">function</span>() {
    click(<span class="string"><span class="delimiter">'</span><span class="content">a:contains(&quot;Bugs Bunny&quot;)</span><span class="delimiter">'</span></span>).then(<span class="keyword">function</span>() {
      equal(find(<span class="string"><span class="delimiter">'</span><span class="content">h4</span><span class="delimiter">'</span></span>).text(), <span class="string"><span class="delimiter">'</span><span class="content">Bugs Bunny</span><span class="delimiter">'</span></span>);
    });
  });
});

test(<span class="string"><span class="delimiter">'</span><span class="content">Should be able visit a speaker page</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>() {
  visit(<span class="string"><span class="delimiter">'</span><span class="content">/speakers/1</span><span class="delimiter">'</span></span>).then(<span class="keyword">function</span>() {
    equal(find(<span class="string"><span class="delimiter">'</span><span class="content">h4</span><span class="delimiter">'</span></span>).text(), <span class="string"><span class="delimiter">'</span><span class="content">Bugs Bunny</span><span class="delimiter">'</span></span>);
  });
});
</pre></td>
</tr></table>
</div></div>
<p>Take a look at the <code>setup</code> function. There is an array of objects that contains the speaker data, currently only <code>id</code>s and <code>name</code>s.
Below that we are setting up the request stubs. Currently this feels
like a lot of boilerplate, and that is because it is. I&#39;m sure
eventually someone will write a nice abstraction to clean this up. This
code simply stubs out the expected server-side calls and returns a JSON
string in the format ember-data expects.</p>

<p>Our four tests are very simple. The first tests the navigation, the 2nd
tests the speakers are in the list, the 3rd tests that we can navigate
to an individual speaker, and the 4th tests that we can visit the speaker page directly.</p>

<p>Let&#39;s make each pass:</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="comment">// ember/app/router.js</span>
Router.map(<span class="keyword">function</span>() {
  <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">about</span><span class="delimiter">'</span></span>);
  <span class="local-variable">this</span>.resource(<span class="string"><span class="delimiter">'</span><span class="content">speakers</span><span class="delimiter">'</span></span>);
});
</pre></td>
</tr></table>
</div></div><div class="highlight hbs "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre>// ember/app/templates/application.hbs
{{link-to 'About' 'about'}}
{{link-to 'Speakers' 'speakers'}}
</pre></td>
</tr></table>
</div></div><div class="highlight hbs "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre>// ember/app/templates/speakers.hbs
&lt;h3&gt;Speakers&lt;/h3&gt;

{{outlet}}
</pre></td>
</tr></table>
</div></div>
<p>The first test should now be passing.</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre><span class="comment">// ember/app/router.js</span>
Router.map(<span class="keyword">function</span>() {
  <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">about</span><span class="delimiter">'</span></span>);
  <span class="local-variable">this</span>.resource(<span class="string"><span class="delimiter">'</span><span class="content">speakers</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>() {
    <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">show</span><span class="delimiter">'</span></span>, {<span class="key">path</span>: <span class="string"><span class="delimiter">'</span><span class="content">:speaker_id</span><span class="delimiter">'</span></span>});
  });
});
</pre></td>
</tr></table>
</div></div><div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre><span class="comment">// ember/app/models/speaker.js</span>
<span class="reserved">import</span> DS from <span class="string"><span class="delimiter">'</span><span class="content">ember-data</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> DS.Model.extend({
  <span class="key">name</span>: DS.attr(<span class="string"><span class="delimiter">'</span><span class="content">string</span><span class="delimiter">'</span></span>)
});
</pre></td>
</tr></table>
</div></div><div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre><span class="comment">// ember/app/routes/speakers/index.js</span>
<span class="reserved">import</span> Ember from <span class="string"><span class="delimiter">'</span><span class="content">ember</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> Ember.Route.extend({
  <span class="function">model</span>: <span class="keyword">function</span>() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.store.find(<span class="string"><span class="delimiter">'</span><span class="content">speaker</span><span class="delimiter">'</span></span>);
  }
});
</pre></td>
</tr></table>
</div></div><div class="highlight hbs "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre>// ember/templates/speakers/index.hbs
{{#each}}
  {{link-to name 'speakers.show' this}}
{{/each}}
</pre></td>
</tr></table>
</div></div>
<p>The 2nd test should now be passing.</p>
<div class="highlight hbs "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
</pre></td>
  <td class="code"><pre>// ember/templates/speakers/show.hbs
&lt;h4&gt;{{name}}&lt;/h4&gt;
</pre></td>
</tr></table>
</div></div>
<p>The 3rd &amp; 4th tests should now be passing.</p>

<p>Passing tests are great and all, but let&#39;s actually make the app useable by getting our Rails backend
in the game. </p>

<p>Let&#39;s generate a model from our Rails app <code>rails g model speaker name:string</code></p>

<p>Add some seed data</p>
<div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre><span class="comment"># rails/db/seeds.rb</span>
<span class="constant">Speaker</span>.create(<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Bugs Bunny</span><span class="delimiter">'</span></span>)
<span class="constant">Speaker</span>.create(<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Wile E. Coyote</span><span class="delimiter">'</span></span>)
<span class="constant">Speaker</span>.create(<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Yosemite Sam</span><span class="delimiter">'</span></span>)
</pre></td>
</tr></table>
</div></div>
<p>Create, migrate and seed <code>rake db:create db:migrate db:seed</code></p>

<p>Add a <code>speakers</code> resource under an <code>api</code> namespace`</p>
<div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre><span class="comment"># rails/config/routes.rb</span>
namespace <span class="symbol">:api</span> <span class="keyword">do</span>
  resources <span class="symbol">:speakers</span>
<span class="keyword">end</span>
</pre></td>
</tr></table>
</div></div>
<p>Now add the controller</p>
<div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
</pre></td>
  <td class="code"><pre><span class="comment"># rails/app/controllers/api/speakers_controller.rb</span>
<span class="keyword">class</span> <span class="class">Api::SpeakersController</span> &lt; <span class="constant">ApplicationController</span>
  <span class="keyword">def</span> <span class="function">index</span>
    render <span class="key">json</span>: <span class="constant">Speaker</span>.all
  <span class="keyword">end</span>

  <span class="keyword">def</span> <span class="function">show</span>
    render <span class="key">json</span>: <span class="constant">Speaker</span>.find(params[<span class="symbol">:id</span>])
  <span class="keyword">end</span>
<span class="keyword">end</span>
</pre></td>
</tr></table>
</div></div>
<p>Finally we need to generate a serializer <code>rails g serializer speaker</code></p>

<p>Add <code>name</code> to the list of attributes to serialize</p>
<div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre><span class="keyword">class</span> <span class="class">SpeakerSerializer</span> &lt; <span class="constant">ActiveModel</span>::<span class="constant">Serializer</span>
  attributes <span class="symbol">:id</span>, <span class="symbol">:name</span>
<span class="keyword">end</span>
</pre></td>
</tr></table>
</div></div>
<p>Start your Rails server with port <code>3000</code> and restart your ember server with the command 
<code>ember server --proxy http://localhost:3000</code></p>

<p>Any remote requests will be proxied to this location. Now you can point
your browser to <code>http://localhost:4200</code>, click on <code>Speakers</code> and you
should see:</p>

<p><img src="http://i.imgur.com/dcdkJDo.png" alt="Screen1"></p>

<p>That wraps up Part 3. In <a href="http://reefpoints.dockyard.com/2014/05/31/building-an-ember-app-with-rails-part-4.html">Part 4</a> we will get into relationships.</p>

<p><a href="https://github.com/bostonember/website/commit/a21e06a9a29b19d405e50268a6d276b8db758261">Check out the actual code for this
part</a></p>
</div><div class='post__share'><a class='twitter-share-button' data-url='http://reefpoints.dockyard.com/2014/05/09/building-an-ember-app-with-rails-part-3.html' data-via='DockYard' href='https://twitter.com/share'>Tweet</a><script>
  !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='//platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','twitter-wjs');
</script><div class='g-plusone' data-href='#' data-size='medium' data-width='100'></div><script>
  (function() {var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;po.src = 'https://apis.google.com/js/plusone.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);})();
</script><span class='post__share--github'>If you see an issue, please send a <a href='https://github.com/dockyard/reefpoints/blob/master/source/posts/', class='text-link post__issue', target: '_blank'>pull request</a> to contribute.</span></div><div class='related-posts-wrap'><div class='post__avatar-wrap'><img class='post__avatar' src='/images/team/brian-cardarella.jpg'><h5 class='post__avatar__name'>Brian Cardarella</h5><h5 class='post__avatar__position headline--sub'>CEO At DockYard
</h5><nav class='post__avatar__social-links'><a target="_blank" class="post__avatar__social-link--twitter" data-icon="#" href="http://twitter.com/bcardarella">bcardarella</a><a target="_blank" class="post__avatar__social-link--github" data-icon="★" href="https://github.com/bcardarella">bcardarella</a></nav></div><div class='related-posts'><h3 class='related-posts__header headline--sub'>Other posts by Brian</h3><a class="related-post" href="/2014/12/28/lessons-learned-three-years-running-a-software-consultancy.html"><h2 class='related-post__title'>Lessons Learned - Three years of running a software consultancy</h2><p>December 28<sup>th</sup>, 2014</p></a>
<a class="related-post" href="/2014/12/26/pattern-matching-in-elixir-for-rubyists.html"><h2 class='related-post__title'>Pattern Matching in Elixir for Rubyists</h2><p>December 26<sup>th</sup>, 2014</p></a>
<a class="related-posts-link text-link" href="/authors/brian-cardarella.html">See all 73 posts by Brian</a></div></div><p class='post__tags'><a class="post__tag" href="/categories/ember.html">Ember.js&nbsp;<span class='post__tag__count'>(29)</span></a> <a class="post__tag" href="/categories/ruby.html">Ruby&nbsp;<span class='post__tag__count'>(47)</span></a> <a class="post__tag" href="/categories/ruby-on-rails.html">Ruby on Rails&nbsp;<span class='post__tag__count'>(37)</span></a></p><div id='disqus_thread'></div><script>
  var disqus_shortname = 'reefpoints';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script><noscript>Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus</a>.</noscript></noscript><script>
  var path = window.location.pathname.split('/').reverse();
  var postname = path[0].split('.');
  var change = postname[0] + '.md';
  var newpath = 'https://github.com/dockyard/reefpoints/blob/master/source/posts/' + path[3] + '-' + path[2] + '-' + path[1] + '-' + change
  $('.post__issue').attr('href', newpath);
</script></div><div class='push--footer'></div><footer><div class='l-wrap'><div class='l-footer-group'><h3 class='footer-group__title'>EVENTS</h3><a class="footer__event--wgc" target="_blank" href="http://wickedgoodember.com/">Wicked Good Ember Conf</a><a class="footer__event--ember" target="_blank" href="http://www.meetup.com/Boston-Ember-js/">Boston Ember.js Meetup</a><a class="footer__event--openhack" target="_blank" href="http://openhack.github.io/boston/">OpenHack Boston</a><a class="footer__event--ux" target="_blank" href="http://www.meetup.com/uxboston/">UX Boston Meetup</a><a class="footer__event--swift" target="_blank" href="http://www.meetup.com/Boston-Swift/">Boston Swift</a><a class="footer__event--uxhh" target="_blank" href="http://www.uxhappyhour.com/bos">UX Happy Hour</a></div><div class='l-footer-group'><a href="/"><h3 class='footer-group__title'>BLOG</h3></a>
<a class="footer__post" href="/2015/01/05/avoid-chaining-modifiers.html"><strong>BEM Tips: Avoid Chaining Modifiers</strong><h6 class='footer-desc'></h6></a>
<a class="footer__post" href="/2014/12/30/modeling-mental-models.html"><strong>Tips on Mental Models</strong><h6 class='footer-desc'>A few things to keep in mind.</h6></a>
<a class="footer__post" href="/2014/12/28/lessons-learned-three-years-running-a-software-consultancy.html"><strong>Lessons Learned - Three years of running a software consultancy</strong><h6 class='footer-desc'></h6></a></div><div class='l-footer-group'><a href="http://dockyard.com/hire-us"><h3 class='footer-group__title'>CONTACT</h3></a><h6 class='footer-desc'>DockYard HQ is located in Boston. Stop in sometime and meet our team!</h6><a class="footer__address" target="_blank" href="http://goo.gl/maps/zBGfn"><h6>DockYard Inc.<br>101 Tremont Street<br>Suite 200<br>Boston, MA 02108</h6></a>
<a class="text-link" href="http://dockyard.com/hire-us">Get in touch.</a><div class='social-links--footer'><a target="_blank" data-icon="#" class="social-link" href="https://twitter.com/dockyard"><span class='is-hidden'>Twitter</span></a>
<a target="_blank" data-icon="★" class="social-link" href="https://github.com/dockyard"><span class='is-hidden'>GitHub</span></a>
<a target="_blank" data-icon="✒" class="social-link" href="http://reefpoints.dockyard.com/atom.xml"><span class='is-hidden'>RSS</span></a></div></div></div></footer><script>
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'reefpoints'; // required: replace example with your forum shortname
  
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script></body></html>
