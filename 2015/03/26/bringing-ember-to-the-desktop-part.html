<!DOCTYPE html><html><head><title>Bringing Ember to the Desktop with NW.js</title><link href="/stylesheets/all-84f1eb0e.css" media="screen" rel="stylesheet" type="text/css" /><script src="/javascripts/all-ce68a29a.js" type="text/javascript"></script><meta content='NO-CACHE' http-equiv='CACHE-CONTROL'><meta content='DockYard is a Ruby on Rails, PostgreSQL, and, Ember.js, web / mobile application development software consultancy based in Boston, MA.' namer='description'><meta content='ruby on rails, rails, ruby, ruby on rails training, ruby application development, ruby on rails application development, ember application development, ember.js application development, software application development, web, web application development, mobile, mobile application development, ios, ios application development, iphone, iphone application development, android, android application development, postgres, startups, enterprise, Boston, MA, Massachusetts, for hire' name='keywords'><meta content='web development, mobile development, startups, enterprise, ruby on rails, rails, ruby, ruby on rails training, Boston, for hire' name='keywords'><meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0' name='viewport'><meta charset='utf-8'><meta content='DockYard.com - ' name='description'><meta content='edeblois' name='twitter:creator'><meta content='summary' name='twitter:card'><meta content='@DockYard' name='twitter:site'><meta content='http://reefpoints.dockyard.com/2015/03/26/bringing-ember-to-the-desktop-part.html' name='twitter:url'><meta content='Bringing Ember to the Desktop with NW.js' name='twitter:title'><meta name='twitter:description'><link href='//cloud.typography.com/6496052/702882/css/fonts.css' rel='stylesheet' type='text/css'><link href='http://dockyard.com/humans.txt' rel='author'><link href='/favicon-573a5e34.png' rel='shortcut icon' type='image/x-icon'><link href='/favicon-573a5e34.png' rel='icon' type='image/x-icon'><link href='/apple-touch-icon.png' rel='apple-touch-icon'><link href='/apple-touch-icon-precomposed.png' rel='apple-touch-icon-precomposed'><link href='/atom.xml' rel='alternate' title='DockYard - Reefpoints' type='application/atom+xml'><script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-24185112-2']);
    _gaq.push(['_trackPageview']);
  
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
<!--
                                             ..
                                           .O.
                                       .:OO.
                                      :OOO.
                                    :OOO:.
                         ...      :OOOO:
                   ..ZOOOOOOOOO..OZ.O.
                   OOOOOOOOOOOOOOOOI
                  OOOOOOOOOOOOOOOOI,
                 OOOOOOOO. .OOOOOOOO:
                 OOOOOOOO   OOOOOOOOO:
                OOOOOOOOOOOOOOOOOOOOO.
                OOOOOOOOOOOOOOOOOOOOO:
               .OOOOOOOOOOOOOOOOOOOOO:
               .OOOOOOOOOOOOOOOOOOOOO.
                OOOOOOOOOOOOOOOOOOOOO
                OOOOOO?:   .OOOOOOOOO
               .OOOOO      OOOOOOOOOO
,OO ZO,        OOOOO,     OOOOOOOOOO+
 OOOOO.        OOOOO     OOOOOOOOOOO+
  OOO?        OOOOO     .OOOOOOOOOOO:
   OOO,      OOOOO.    .OOOOOOOOOOOO
    OOOOOOOOOOOOO.    .OOOOOOOOOOOO.
     OOOOOOOOOOOO.  .OOOOOOOOOOOOO.
      8OOOOOOOOOOOOOOOOOOOOOOOODO:
         :OOOOOOOOOOOOOOOOOOOO::

--></head><body class='x2015 x2015_03 x2015_03_26 x2015_03_26_bringing-ember-to-the-desktop-part'><header><div class='extended-nav-wrap'><div class='l-wrap--wide'><nav class='extended-nav'><a class="extended-nav--logo" data-icon="⌂" href="http://dockyard.com/"><span class='is-hidden'>Home</span></a>
<a class="extended-nav--close" data-icon="X" href="#"><span class='is-hidden'>Close</span></a><div class='extended-nav__items'><div class='extended-nav__items--mobile'><a class="extended-nav__item--work extended-nav__item" href="#">Work</a><nav class='work-nav--mobile'><a href="http://dockyard.com/work/credit-card-reviews" class="work-nav-item"><strong class='work-nav-item__title'>Credit Card Reviews</strong></a>
<a href="http://dockyard.com/work/scratch" class="work-nav-item"><strong class='work-nav-item__title'>Scratch Wireless</strong></a>
<a href="http://dockyard.com/work/coachup" class="work-nav-item"><strong class='work-nav-item__title'>CoachUp</strong></a>
<a href="http://dockyard.com/work/askthem" class="work-nav-item"><strong class='work-nav-item__title'>AskThem</strong></a>
<a href="http://dockyard.com/work/beacon-hill-blitz" class="work-nav-item"><strong class='work-nav-item__title'>Beacon Hill Blitz</strong></a></nav></div><a class="extended-nav__item" href="http://dockyard.com/team">Our Team</a><a class="extended-nav__item" href="http://dockyard.com/process">Process</a><a class="extended-nav__item" href="http://dockyard.com/community">Community</a><a class="extended-nav__item active" href="/">Blog</a><a class="extended-nav__item" href="http://dockyard.com/hire-us">Hire Us</a></div></nav><nav class='work-nav'><h6>Selected Work</h6><a href="http://dockyard.com/work/credit-card-reviews" class="work-nav-item"><strong class='work-nav-item__title'>Credit Card Reviews</strong><p>Credit card advice from real people.</p></a>
<a href="http://dockyard.com/work/scratch" class="work-nav-item"><strong class='work-nav-item__title'>Scratch Wireless</strong><p>Never pay another penny for smartphone service.</p></a>
<a href="http://dockyard.com/work/coachup" class="work-nav-item"><strong class='work-nav-item__title'>CoachUp</strong><p>You should be training. Right now.</p></a>
<a href="http://dockyard.com/work/askthem" class="work-nav-item"><strong class='work-nav-item__title'>AskThem</strong><p>Ask officials questions on city, state, and federal levels.</p></a>
<a href="http://dockyard.com/work/beacon-hill-blitz" class="work-nav-item"><strong class='work-nav-item__title'>Beacon Hill Blitz</strong><p>How technology helped repeal the #TechTax.</p></a></nav></div></div><nav class='main-nav-wrap'><div class='main-nav l-wrap--wide'><a class="logo" href="http://dockyard.com">DockYard</a><a class="club-sandwich" data-icon="☰" href="#"><span class='is-hidden'>Navigation</span></a></div></nav></header><div class='push--header'></div><div class='l-wrap--blog'><a href="/"><strong class='logo--blog'>ReefPoints</strong><strong class='logo--blog__tagline'>Blog</strong></a><nav class='blog-nav'><a class="blog-nav__item " href="/">Posts</a><a class="blog-nav__item " href="/categories.html">Categories</a><a class="blog-nav__item " href="/authors.html">Authors</a></nav></div><div class='l-wrap--blog__post'><h1 class='post__title'>Bringing Ember to the Desktop with NW.js</h1><a class="post__author" href="/authors/estelle-deblois.html">Estelle DeBlois</a><time class='post__date'>March 26<sup>th</sup>, 2015</time><div class='post__content'><p>One of our recent client projects at DockYard had us go in a totally new
direction in terms of technology stack. We needed to build a desktop
application that could communicate with some Arduino devices via
<a href="https://developer.mozilla.org/en-US/docs/WebSockets">WebSockets</a>.</p>

<p>Let me first put this out there: I love building for the web. The mere
thought of developing native desktop applications always makes me cringe
a little, though I admit, I haven&#39;t done much in that arena since those
<a href="http://en.wikipedia.org/wiki/Swing_%28Java%29">Java Swing</a> days from forever ago.
Nevertheless, you may find yourself at some point needing to build for the desktop.
Thankfully, you don&#39;t have to put your fuzzy little Tomster away.</p>

<p><a href="https://github.com/nwjs/nw.js">NW.js</a>, formerly known as Node WebKit, is a runtime
built on top of Chromium and Node/IO.js that lets you develop native applications
using the web technologies that you love. You can essentially build an Ember app, and
also invoke Node modules all within the browser, then package it up as
a Mac OS X application or Windows <code>exe</code> file when you&#39;re ready to distribute.</p>

<h2>Demo</h2>

<p>Here&#39;s a screenshot from a NW.js app built with Ember for demonstration
purposes:</p>

<p><img src="https://cloud.githubusercontent.com/assets/1691398/6768192/536a6fde-d033-11e4-9375-e2f506c1c8c7.png" alt="screenshot"></p>

<p>It&#39;s a simple GitHub-flavored Markdown Editor that lets you create and preview
Markdown documents, and save them to disk.</p>

<p>You can try it for yourself. Just download the application from the
following links for your platform, unzip, then double-click on <code>Markdown
Editor.app</code> (Mac) or <code>Markdown Editor.exe</code> (Windows).</p>

<ul>
<li>Mac OS X: <a href="https://s3.amazonaws.com/dockyard-general/ember-nw-demo/markdown-editor-osx64.zip">markdown-editor-osx64</a></li>
<li>Windows:
<a href="https://s3.amazonaws.com/dockyard-general/ember-nw-demo/markdown-editor-win64.zip">markdown-editor-win64</a></li>
<li><a href="https://github.com/brzpegasus/ember-nw-markdown">Source code</a></li>
</ul>

<p>For a touch of user friendliness, the app even ships with your favorite
mascot:</p>

<p><em>Mac:</em>
<img alt="Mac Icon" src="https://cloud.githubusercontent.com/assets/1691398/6853610/9ee8c52c-d3c2-11e4-971a-3472bfd35609.png" style="width: 600px; height: 205px;"></p>

<p><em>Windows:</em>
<img alt="Win Icon" src="https://cloud.githubusercontent.com/assets/1691398/6853614/a32becc2-d3c2-11e4-9ed4-83d645825f4b.png" style="width: 114px; height: 312px;"></p>

<h2>Getting Started</h2>

<p>The main entry point to a NW.js application is an HTML page that you
specify in your project&#39;s <code>package.json</code>:</p>
<div class="highlight json "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre>{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">my-app</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">main</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">dist/index.html</span><span class="delimiter">&quot;</span></span>
}
</pre></td>
</tr></table>
</div></div>
<p>On startup, NW.js will launch a new Chromium browser window,
then set the location to that starting page:
<code>file:///Users/brzpegasus/projects/my-app/dist/index.html#/</code>.</p>

<p>This does require that you set your <code>Ember.Router</code>
<a href="http://emberjs.com/api/classes/Ember.Location.html">location type</a> to <code>hash</code>. In Ember CLI,
this is a simple tweak to your <code>config/environment.js</code> file:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre><span class="comment">// config/environment.js</span>
modules.<span class="function">exports</span> = <span class="keyword">function</span>(environment) {
  <span class="keyword">var</span> ENV = {
    <span class="key">locationType</span>: <span class="string"><span class="delimiter">'</span><span class="content">hash</span><span class="delimiter">'</span></span>, <span class="comment">// Change this from 'auto' to 'hash'</span>
    <span class="comment">// ...</span>
  };
};
</pre></td>
</tr></table>
</div></div>
<p>From there on, you should feel quite at home and ready to develop your Ember app.</p>

<p>Or maybe not quite yet.</p>

<h2>A Bit About NW.js</h2>

<p>NW.js tweaks Chromium and Node in order to
<a href="https://github.com/nwjs/nw.js/wiki/How-node.js-is-integrated-with-chromium">integrate</a>
the two worlds and make it possible for you to call Node modules from the client:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre>console.log(location.href);   <span class="comment">// Yup, we're in browser land</span>

<span class="keyword">var</span> fs = require(<span class="string"><span class="delimiter">'</span><span class="content">fs</span><span class="delimiter">'</span></span>);       <span class="comment">// Call core Node modules</span>
<span class="keyword">var</span> async = require(<span class="string"><span class="delimiter">'</span><span class="content">async</span><span class="delimiter">'</span></span>); <span class="comment">// Or even third-party modules!</span>
</pre></td>
</tr></table>
</div></div>
<p>If you&#39;re used to Node and CommonJS, this <code>require</code> function should look very
familiar, but it isn&#39;t exactly the same. Here&#39;s what it does:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="keyword">function</span> <span class="function">require</span>(name) {
  <span class="keyword">if</span> (name == <span class="string"><span class="delimiter">'</span><span class="content">nw.gui</span><span class="delimiter">'</span></span>)
    <span class="keyword">return</span> nwDispatcher.requireNwGui();
  <span class="keyword">return</span> global.require(name);
}
</pre></td>
</tr></table>
</div></div>
<p>So if you were to call <code>require(&#39;nw.gui&#39;)</code>, you would get access to the
<a href="https://github.com/nwjs/nw.js/wiki/Native-UI-API-Manual">Native UI Library</a>
to do things like manipulating the window frame, adding menus, keyboard shortcuts, etc.
Otherwise, the function ends up calling <code>global.require</code> to import Node modules.</p>

<p><code>global</code> is Node&#39;s global namespace object. You can use it to retrieve
other global objects besides <code>require</code>, such as <code>global.process</code>.
However, many of them are made available directly on the <code>window</code> object, so you can
reference them without prefix, just as you would in Node:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre>console.log(window.process === global.process) <span class="comment">// =&gt; true</span>
console.log(process.env.USER) <span class="comment">// &quot;brzpegasus&quot;</span>
console.log(process.platform) <span class="comment">// &quot;darwin&quot;</span>
</pre></td>
</tr></table>
</div></div>
<h2>Naming Conflicts</h2>

<p>Modules written with ES2015 (<a href="https://esdiscuss.org/topic/javascript-2015#content-3">previously, ES6</a>)
syntax in your Ember app get transpiled into
AMD for today&#39;s browsers. This is problematic because AMD also specifies a
<code>require</code> function for loading modules. In Ember CLI, this is implemented via
<a href="https://github.com/ember-cli/loader.js">ember-cli/loader.js</a>.</p>

<p>By the time the app is done loading, any functionality that depends on
the native UI library or Node modules will break as the <code>require</code>
function would have been redefined.</p>

<p>You can get around this by saving a reference to Node&#39;s <code>require</code> before loading
any script. Once all scripts are loaded and executed, redefine <code>require</code>
to work with both module systems. This is necessary as certain operations
will not work with the alias:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
</pre></td>
  <td class="code"><pre><span class="comment">// Before loading any script</span>
window.requireNode = require;

<span class="comment">// After all scripts are loaded</span>
<span class="keyword">var</span> requireAMD = require;

window.<span class="function">require</span> = <span class="keyword">function</span>() {
  <span class="keyword">try</span> {
    <span class="keyword">return</span> requireAMD.apply(<span class="predefined-constant">null</span>, <span class="local-variable">arguments</span>);
  } <span class="keyword">catch</span> (error) {
    <span class="keyword">return</span> requireNode.apply(<span class="predefined-constant">null</span>, <span class="local-variable">arguments</span>);
  }
};
</pre></td>
</tr></table>
</div></div>
<h2>An Addon For All Your NW.js Needs</h2>

<p>I&#39;ve recently released an Ember CLI addon to help make this process
easier. Simply install <a href="https://github.com/brzpegasus/ember-cli-node-webkit">ember-cli-node-webkit</a>,
then start coding right away. All the configuration will be taken care
of for you, so no need to worry about <code>require</code> naming conflicts.</p>

<p>The addon can build your project, watch for changes, and reload the page in NW.js
during development. And when you&#39;re ready to distribute, packaging is just
one command away. The packaging is a wrapper around the excellent
<a href="https://github.com/mllrsohn/node-webkit-builder">node-webkit-builder</a>
but the configuration is done automatically based on the addon&#39;s
understanding of your app structure.</p>

<p>I will not spend time talking about the addon in this blog post, but I
invite you to check out the <a href="https://github.com/brzpegasus/ember-cli-node-webkit/blob/master/README.md">README</a>
to get familiar with all the options that are at your disposal.</p>

<h2>Conclusion</h2>

<p>When we first set out to build a desktop app for a client project,
documentation on how to integrate NW.js with Ember was scarce. Even more
scarce was documentation on how to integrate it with Ember CLI. I hope
this post and this addon will provide some guidance to others down the
road.</p>

<p>I&#39;d love to share some code samples and discuss patterns you can adopt
to make your NW.js app more manageable and testable, but they&#39;d be too
dense for this introductory blog post. However, you&#39;ll be hearing more from me
on this topic in the future!</p>
</div><div class='post__share'><a class='twitter-share-button' data-url='http://reefpoints.dockyard.com/2015/03/26/bringing-ember-to-the-desktop-part.html' data-via='DockYard' href='https://twitter.com/share'>Tweet</a><script>
  !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='//platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','twitter-wjs');
</script><div class='g-plusone' data-href='#' data-size='medium' data-width='100'></div><script>
  (function() {var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;po.src = 'https://apis.google.com/js/plusone.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);})();
</script><span class='post__share--github'>If you see an issue, please send a <a href='https://github.com/dockyard/reefpoints/blob/master/source/posts/', class='text-link post__issue', target: '_blank'>pull request</a> to contribute.</span></div><div class='related-posts-wrap'><div class='post__avatar-wrap'><img class='post__avatar' src='/images/team/estelle-deblois.jpg'><h5 class='post__avatar__name'>Estelle DeBlois</h5><h5 class='post__avatar__position headline--sub'>Developer At DockYard
</h5><nav class='post__avatar__social-links'><a target="_blank" class="post__avatar__social-link--twitter" data-icon="#" href="http://twitter.com/edeblois">edeblois</a><a target="_blank" class="post__avatar__social-link--github" data-icon="★" href="https://github.com/brzpegasus">brzpegasus</a></nav></div><div class='related-posts'><h3 class='related-posts__header headline--sub'>Other posts by Estelle</h3><a class="related-post" href="/2015/01/16/joining-dockyard.html"><h2 class='related-post__title'>Joining DockYard</h2><p>January 16<sup>th</sup>, 2015</p></a>
<a class="related-posts-link text-link" href="/authors/estelle-deblois.html">See all 2 posts by Estelle</a></div></div><p class='post__tags'><a class="post__tag" href="/categories/ember.html">Ember.js&nbsp;<span class='post__tag__count'>(41)</span></a></p><div id='disqus_thread'></div><script>
  var disqus_shortname = 'reefpoints';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script><noscript>Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus</a>.</noscript></noscript><script>
  var path = window.location.pathname.split('/').reverse();
  var postname = path[0].split('.');
  var change = postname[0] + '.md';
  var newpath = 'https://github.com/dockyard/reefpoints/blob/master/source/posts/' + path[3] + '-' + path[2] + '-' + path[1] + '-' + change
  $('.post__issue').attr('href', newpath);
</script></div><div class='push--footer'></div><footer><div class='l-wrap'><div class='l-footer-group'><h3 class='footer-group__title'>EVENTS</h3><a class="footer__event--wgc" target="_blank" href="http://wickedgoodember.com/">Wicked Good Ember Conf</a><a class="footer__event--ember" target="_blank" href="http://www.meetup.com/Boston-Ember-js/">Boston Ember.js Meetup</a><a class="footer__event--openhack" target="_blank" href="http://openhack.github.io/boston/">OpenHack Boston</a><a class="footer__event--ux" target="_blank" href="http://www.meetup.com/uxboston/">UX Boston Meetup</a><a class="footer__event--swift" target="_blank" href="http://www.meetup.com/Boston-Swift/">Boston Swift</a><a class="footer__event--uxhh" target="_blank" href="http://www.uxhappyhour.com/bos">UX Happy Hour</a></div><div class='l-footer-group'><a href="/"><h3 class='footer-group__title'>BLOG</h3></a>
<a class="footer__post" href="/2015/04/20/ember-in-viewport.html"><strong>Detecting Ember.js Components Entering or Leaving the Viewport</strong><h6 class='footer-desc'>I wrote a post last year about how I made an Ember Mixin that would let Ember Components or Views know if their DOM element had entered or left the viewport. This time, I want to talk about how I improved the original Mixin to use the requestAnimationFrame API for improved performance at close to 60FPS.</h6></a>
<a class="footer__post" href="/2015/04/10/the-beginners-fallacy.html"><strong>The Beginner's Fallacy</strong><h6 class='footer-desc'></h6></a>
<a class="footer__post" href="/2015/04/09/the-importance-of-being-experience-first.html"><strong>The Importance of Being Experience First</strong><h6 class='footer-desc'>Why being Experience First is more critical than ever – will the rise of website builders threaten the future of software consulting?</h6></a></div><div class='l-footer-group'><a href="http://dockyard.com/hire-us"><h3 class='footer-group__title'>CONTACT</h3></a><h6 class='footer-desc'>DockYard HQ is located in Boston. Stop in sometime and meet our team!</h6><a class="footer__address" target="_blank" href="http://goo.gl/maps/zBGfn"><h6>DockYard Inc.<br>294 Washington St<br>Suite 1150<br>Boston, MA 02108</h6></a>
<a class="text-link" href="http://dockyard.com/hire-us">Get in touch.</a><div class='social-links--footer'><a target="_blank" data-icon="#" class="social-link" href="https://twitter.com/dockyard"><span class='is-hidden'>Twitter</span></a>
<a target="_blank" data-icon="★" class="social-link" href="https://github.com/dockyard"><span class='is-hidden'>GitHub</span></a>
<a target="_blank" data-icon="✒" class="social-link" href="/atom.xml"><span class='is-hidden'>RSS</span></a></div></div></div></footer><script>
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'reefpoints'; // required: replace example with your forum shortname
  
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script></body></html>
